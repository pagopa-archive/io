<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="628px" preserveAspectRatio="none" style="width:555px;height:628px;" version="1.1" viewBox="0 0 555 628" width="555px" zoomAndPan="magnify"><defs><filter height="300%" id="f1b0zh9929npsg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster azure_region--><rect fill="#FFFFFF" filter="url(#f1b0zh9929npsg)" height="437.5" style="stroke: #000000; stroke-width: 1.5;" width="262" x="22" y="179.5"/><path d="M135,180.5 L135,188.7969 L125,198.7969 L22,198.7969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="25" y="193.4951">azure_region</text><!--cluster kubernetes_cluster--><rect fill="#FFFFFF" filter="url(#f1b0zh9929npsg)" height="269.5" style="stroke: #000000; stroke-width: 1.5;" width="214" x="46" y="323.5"/><path d="M209,324.5 L209,332.7969 L199,342.7969 L46,342.7969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="49" y="337.4951">kubernetes_cluster</text><!--cluster app_backend_pod--><rect fill="#FFFFFF" filter="url(#f1b0zh9929npsg)" height="97" style="stroke: #000000; stroke-width: 1.5;" width="166" x="70" y="472"/><path d="M220,473 L220,481.2969 L210,491.2969 L70,491.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="73" y="485.9951">app_backend_pod</text><!--entity public_ip--><polygon fill="#FEFECE" filter="url(#f1b0zh9929npsg)" points="73,224.5,83,214.5,173,214.5,173,250.7969,163,260.7969,73,260.7969,73,224.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="163" x2="172" y1="224.5" y2="215.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="73" x2="163" y1="224.5" y2="224.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="163" x2="163" y1="224.5" y2="260.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="88" y="247.4951">public_ip</text><!--entity ingress_service--><polygon fill="#FEFECE" filter="url(#f1b0zh9929npsg)" points="83.5,368.5,93.5,358.5,230.5,358.5,230.5,394.7969,220.5,404.7969,83.5,404.7969,83.5,368.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="220.5" x2="229.5" y1="368.5" y2="359.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="83.5" x2="220.5" y1="368.5" y2="368.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="220.5" x2="220.5" y1="368.5" y2="404.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="98.5" y="391.4951">ingress_service</text><!--entity app_backend--><polygon fill="#FEFECE" filter="url(#f1b0zh9929npsg)" points="86.5,517,96.5,507,219.5,507,219.5,543.2969,209.5,553.2969,86.5,553.2969,86.5,517" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="209.5" x2="218.5" y1="517" y2="508"/><line style="stroke: #000000; stroke-width: 1.5;" x1="86.5" x2="209.5" y1="517" y2="517"/><line style="stroke: #000000; stroke-width: 1.5;" x1="209.5" x2="209.5" y1="517" y2="553.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="101.5" y="539.9951">app_backend</text><!--entity italia_app--><polygon fill="#FEFECE" filter="url(#f1b0zh9929npsg)" points="71.5,18.5,81.5,8.5,174.5,8.5,174.5,44.7969,164.5,54.7969,71.5,54.7969,71.5,18.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="164.5" x2="173.5" y1="18.5" y2="9.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="71.5" x2="164.5" y1="18.5" y2="18.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="164.5" x2="164.5" y1="18.5" y2="54.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="86.5" y="41.4951">italia_app</text><path d="M300.5,354 L300.5,377.5 L230.755,381.5 L300.5,385.5 L300.5,409.3984 A0,0 0 0 0 300.5,409.3984 L543.5,409.3984 A0,0 0 0 0 543.5,409.3984 L543.5,364 L533.5,354 L300.5,354 A0,0 0 0 0 300.5,354 " fill="#FBFB77" filter="url(#f1b0zh9929npsg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M533.5,354 L533.5,364 L543.5,364 L533.5,354 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="306.5" y="371.0669">NGINX reverse proxy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="306.5" y="386.1997">terminates HTTPS connection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="306.5" y="401.3325">routes request based on host/path</text><!--link italia_app to public_ip--><path d="M108.436,59.366 C100.6877,75.201 91.9608,95.913 88,115.5 C81.3358,148.455 95.301,185.471 107.52,209.782 " fill="none" id="italia_app-public_ip" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="109.934,214.47,109.3712,204.6372,107.6455,210.0245,102.2583,208.2988,109.934,214.47" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="110.803,54.615,103.2092,60.8867,108.5732,59.0903,110.3696,64.4543,110.803,54.615" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="89" y="128.5669">80/HTTP</text><!--link italia_app to public_ip--><path d="M132.483,59.519 C137.609,75.562 143.407,96.433 146,115.5 C150.412,147.941 141.319,184.859 133.297,209.295 " fill="none" id="italia_app-public_ip" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="131.607,214.314,138.2701,207.0612,133.2027,209.5755,130.6884,204.5081,131.607,214.314" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="130.919,54.702,129.8942,64.4974,132.4632,59.4576,137.5031,62.0266,130.919,54.702" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="148" y="128.5669">443/HTTPS</text><!--link public_ip to ingress_service--><path d="M102.3561,265.28 C95.0734,277.995 89.8387,293.45 95,307.5 C101.547,325.322 114.589,341.769 127.029,354.522 " fill="none" id="public_ip-ingress_service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="130.862,358.359,127.3302,349.1652,127.3279,354.822,121.671,354.8198,130.862,358.359" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="105.1165,260.727,97.0295,266.3484,102.5238,265.0023,103.8699,270.4966,105.1165,260.727" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="96" y="303.5669">80/TCP</text><!--link public_ip to ingress_service--><path d="M135.984,265.375 C139.374,273.312 142.713,282.12 145,290.5 C150.604,311.035 153.634,334.946 155.247,352.96 " fill="none" id="public_ip-ingress_service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="155.704,358.35,158.9286,349.044,155.2812,353.3679,150.9573,349.7205,155.704,358.35" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="133.877,260.558,133.8207,270.4067,135.8815,265.1386,141.1497,267.1994,133.877,260.558" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="149" y="303.5669">443/TCP</text><!--link ingress_service to app_backend--><path d="M156.255,409.779 C155.541,435.94 154.468,475.231 153.752,501.474 " fill="none" id="ingress_service-app_backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="153.613,506.54,157.8583,497.6531,153.7501,501.5419,149.8613,497.4337,153.613,506.54" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="156.392,404.75,152.1491,413.6381,156.2563,409.7482,160.1462,413.8553,156.392,404.75" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="156" y="452.0669">80/HTTP</text><!--
@startuml
node italia_app

frame azure_region {

node public_ip

frame kubernetes_cluster {

node ingress_service

frame app_backend_pod {

node app_backend

}

}

}


italia_app <- - -> public_ip : 80/HTTP
italia_app <- - -> public_ip : 443/HTTPS

public_ip <- -> ingress_service : 80/TCP
public_ip <- -> ingress_service : 443/TCP

ingress_service <- -> app_backend : 80/HTTP

note right of [ingress_service]
 NGINX reverse proxy
 terminates HTTPS connection
 routes request based on host/path
end note
@enduml

PlantUML version 1.2018.01(Sun Jan 28 18:08:22 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>