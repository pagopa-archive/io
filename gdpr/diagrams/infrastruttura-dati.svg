<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1085px" preserveAspectRatio="none" style="width:557px;height:1085px;" version="1.1" viewBox="0 0 557 1085" width="557px" zoomAndPan="magnify"><defs/><g><!--cluster Smartphone--><rect fill="#FFFFFF" height="190" style="stroke: #000000; stroke-width: 1.5;" width="298" x="197" y="219"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="304.5" y="231.7803">Smartphone</text><!--cluster API Gateway--><rect fill="#FFFFFF" height="176" style="stroke: #000000; stroke-width: 1.5;" width="128" x="19" y="898"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="40" y="910.7803">API Gateway</text><!--cluster App Backend--><rect fill="#FFFFFF" height="204" style="stroke: #000000; stroke-width: 1.5;" width="152" x="368" y="436"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="398" y="448.7803">App Backend</text><!--cluster Pagopa Proxy--><rect fill="#FFFFFF" height="176" style="stroke: #000000; stroke-width: 1.5;" width="140" x="197" y="16"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="219.5" y="28.7803">Pagopa Proxy</text><!--cluster API CD--><rect fill="#FFFFFF" height="204" style="stroke: #000000; stroke-width: 1.5;" width="532" x="14" y="667"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="256.5" y="679.7803">API CD</text><!--entity db_smartphone--><path d="M205.5,254 C205.5,244 267,244 267,244 C267,244 328.5,244 328.5,254 L328.5,391 C328.5,401 267,401 267,401 C267,401 205.5,401 205.5,391 L205.5,254 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M205.5,254 C205.5,264 267,264 267,264 C267,264 328.5,264 328.5,254 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="215.5" y="278.7803">Storage</text><path d="M205.5,277 C205.5,287 267,287 267,287 C267,287 328.5,287 328.5,277 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="221.5" y="296.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="75" x="221.5" y="310.7803">non criptato</text><path d="M205.5,313 C205.5,323 267,323 267,323 C267,323 328.5,323 328.5,313 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M205.5,315 C205.5,325 267,325 267,325 C267,325 328.5,325 328.5,315 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="225.5" y="332.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="221.5" y="346.7803">messaggi</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="221.5" y="360.7803">transazioni</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="221.5" y="374.7803">id_operazione</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="221.5" y="388.7803">id_pagamento</text><!--entity db_smartphone_enc--><path d="M363.5,261 C363.5,251 425,251 425,251 C425,251 486.5,251 486.5,261 L486.5,384 C486.5,394 425,394 425,394 C425,394 363.5,394 363.5,384 L363.5,261 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M363.5,261 C363.5,271 425,271 425,271 C425,271 486.5,271 486.5,261 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="373.5" y="285.7803">Storage</text><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="373.5" y="299.7803">criptato</text><path d="M363.5,298 C363.5,308 425,308 425,308 C425,308 486.5,308 486.5,298 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="63" x="379.5" y="317.7803">peristente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="379.5" y="331.7803">criptato</text><path d="M363.5,334 C363.5,344 425,344 425,344 C425,344 486.5,344 486.5,334 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M363.5,336 C363.5,346 425,346 425,346 C425,346 486.5,346 486.5,336 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="383.5" y="353.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="379.5" y="367.7803">session_token</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="379.5" y="381.7803">wallet_token</text><!--entity db_apigw_clients--><path d="M27,933 C27,923 83,923 83,923 C83,923 139,923 139,933 L139,1056 C139,1066 83,1066 83,1066 C83,1066 27,1066 27,1056 L27,933 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M27,933 C27,943 83,943 83,943 C83,943 139,943 139,933 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="37" y="957.7803">API Clients</text><path d="M27,956 C27,966 83,966 83,966 C83,966 139,966 139,956 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="43" y="975.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="75" x="43" y="989.7803">non criptato</text><path d="M27,992 C27,1002 83,1002 83,1002 C83,1002 139,1002 139,992 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M27,994 C27,1004 83,1004 83,1004 C83,1004 139,1004 139,994 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="47" y="1011.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="43" y="1025.7803">api_token</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="43" y="1039.7803">auth_groups</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="43" y="1053.7803">service_id</text><!--entity db_backend_session--><path d="M376.5,471 C376.5,461 444,461 444,461 C444,461 511.5,461 511.5,471 L511.5,622 C511.5,632 444,632 444,632 C444,632 376.5,632 376.5,622 L376.5,471 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M376.5,471 C376.5,481 444,481 444,481 C444,481 511.5,481 511.5,471 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="386.5" y="495.7803">App Sessions</text><path d="M376.5,494 C376.5,504 444,504 444,504 C444,504 511.5,504 511.5,494 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="392.5" y="513.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="392.5" y="527.7803">criptato</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="392.5" y="541.7803">geo-replicato</text><path d="M376.5,544 C376.5,554 444,554 444,554 C444,554 511.5,554 511.5,544 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M376.5,546 C376.5,556 444,556 444,556 C444,556 511.5,556 511.5,546 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="396.5" y="563.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="392.5" y="577.7803">codice_fiscale</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="392.5" y="591.7803">session_token</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="392.5" y="605.7803">wallet_token</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="392.5" y="619.7803">asserzione_spid</text><!--entity db_pagopaproxy--><path d="M205.5,51 C205.5,41 267,41 267,41 C267,41 328.5,41 328.5,51 L328.5,174 C328.5,184 267,184 267,184 C267,184 205.5,184 205.5,174 L205.5,51 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M205.5,51 C205.5,61 267,61 267,61 C267,61 328.5,61 328.5,51 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="215.5" y="75.7803">IdPagamenti</text><path d="M205.5,74 C205.5,84 267,84 267,84 C267,84 328.5,84 328.5,74 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="221.5" y="93.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="221.5" y="107.7803">criptato</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="221.5" y="121.7803">geo-replicato</text><path d="M205.5,124 C205.5,134 267,134 267,134 C267,134 328.5,134 328.5,124 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M205.5,126 C205.5,136 267,136 267,136 C267,136 328.5,136 328.5,126 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="225.5" y="143.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="221.5" y="157.7803">id_operazione</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="221.5" y="171.7803">id_pagamento</text><!--entity db_messaggi--><path d="M179,702 C179,692 267,692 267,692 C267,692 355,692 355,702 L355,853 C355,863 267,863 267,863 C267,863 179,863 179,853 L179,702 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M179,702 C179,712 267,712 267,712 C267,712 355,712 355,702 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="189" y="726.7803">Messaggi</text><path d="M179,725 C179,735 267,735 267,735 C267,735 355,735 355,725 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="195" y="744.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="195" y="758.7803">criptato</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="195" y="772.7803">geo-replicato</text><path d="M179,775 C179,785 267,785 267,785 C267,785 355,785 355,775 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M179,777 C179,787 267,787 267,787 C267,787 355,787 355,777 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="199" y="794.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="195" y="808.7803">codice_fiscale</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="195" y="822.7803">contenuto</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="195" y="836.7803">id_unico_versamento?</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="195" y="850.7803">id_servizio</text><!--entity db_profili--><path d="M390.5,702 C390.5,692 464,692 464,692 C464,692 537.5,692 537.5,702 L537.5,853 C537.5,863 464,863 464,863 C464,863 390.5,863 390.5,853 L390.5,702 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M390.5,702 C390.5,712 464,712 464,712 C464,712 537.5,712 537.5,702 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="400.5" y="726.7803">Profili</text><path d="M390.5,725 C390.5,735 464,735 464,735 C464,735 537.5,735 537.5,725 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="406.5" y="744.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="406.5" y="758.7803">criptato</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="406.5" y="772.7803">geo-replicato</text><path d="M390.5,775 C390.5,785 464,785 464,785 C464,785 537.5,785 537.5,775 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M390.5,777 C390.5,787 464,787 464,787 C464,787 537.5,787 537.5,777 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="410.5" y="794.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="406.5" y="808.7803">codice_fiscale</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="406.5" y="822.7803">email</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="406.5" y="836.7803">lingue_preferite</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="406.5" y="850.7803">id_servizi_bloccati</text><!--entity db_servizi--><path d="M22.5,709 C22.5,699 83,699 83,699 C83,699 143.5,699 143.5,709 L143.5,846 C143.5,856 83,856 83,856 C83,856 22.5,856 22.5,846 L22.5,709 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M22.5,709 C22.5,719 83,719 83,719 C83,719 143.5,719 143.5,709 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="32.5" y="733.7803">Servizi</text><path d="M22.5,732 C22.5,742 83,742 83,742 C83,742 143.5,742 143.5,732 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="70" x="38.5" y="751.7803">persistente</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="38.5" y="765.7803">criptato</text><text fill="#000000" font-family="Helvetica" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="38.5" y="779.7803">geo-replicato</text><path d="M22.5,782 C22.5,792 83,792 83,792 C83,792 143.5,792 143.5,782 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><path d="M22.5,784 C22.5,794 83,794 83,794 C83,794 143.5,794 143.5,784 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="42.5" y="801.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="38.5" y="815.7803">codice_fiscale</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="38.5" y="829.7803">nome</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="38.5" y="843.7803">pec</text><!--link db_smartphone to db_messaggi--><path d="M267,406.5181 C267,485.8902 267,604.633 267,686.2836 " fill="none" id="db_smartphone-db_messaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="267,691.6073,271,682.6073,267,686.6073,263,682.6073,267,691.6073" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="267,401.2355,263,410.2355,267,406.2355,271,410.2355,267,401.2355" style="stroke: #A80036; stroke-width: 1.0;"/><!--link db_smartphone to db_servizi--><path d="M233.1612,406.1775 C200.0212,488.127 149.8133,612.2822 116.7157,694.127 " fill="none" id="db_smartphone-db_servizi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="114.7584,698.9671,121.8409,692.1232,116.633,694.3318,114.4244,689.1239,114.7584,698.9671" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="235.1597,401.2355,228.0772,408.0794,233.2851,405.8708,235.4937,411.0787,235.1597,401.2355" style="stroke: #A80036; stroke-width: 1.0;"/><!--link db_pagopaproxy to db_smartphone--><path d="M267,189.6379 C267,205.6818 267,222.6612 267,238.9244 " fill="none" id="db_pagopaproxy-db_smartphone" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="267,243.9468,271,234.9468,267,238.9468,263,234.9468,267,243.9468" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="267,184.1827,263,193.1827,267,189.1827,271,193.1827,267,184.1827" style="stroke: #A80036; stroke-width: 1.0;"/><!--link db_smartphone_enc to db_backend_session--><path d="M431.5131,399.2865 C433.0453,417.3496 434.6928,436.7729 436.2725,455.3971 " fill="none" id="db_smartphone_enc-db_backend_session" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="436.7161,460.627,439.9409,451.3211,436.2934,455.6449,431.9695,451.9974,436.7161,460.627" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="431.0901,394.2993,427.8651,403.6052,431.5127,399.2814,435.8364,402.929,431.0901,394.2993" style="stroke: #A80036; stroke-width: 1.0;"/><!--link db_backend_session to db_profili--><path d="M451.8567,637.2447 C453.2702,653.5703 454.7436,670.5883 456.1567,686.9095 " fill="none" id="db_backend_session-db_profili" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="456.5931,691.9508,459.8019,682.6393,456.1618,686.9694,451.8317,683.3294,456.5931,691.9508" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="451.4188,632.1876,448.2103,641.4992,451.8502,637.169,456.1804,640.8089,451.4188,632.1876" style="stroke: #A80036; stroke-width: 1.0;"/><!--link db_servizi to db_apigw_clients--><path d="M83,861.296 C83,879.9033 83,899.5343 83,917.8389 " fill="none" id="db_servizi-db_apigw_clients" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="83,922.9646,87,913.9646,83,917.9646,79,913.9646,83,922.9646" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="83,856.1488,79,865.1488,83,861.1488,87,865.1488,83,856.1488" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
skinparamlocked shadowing false
skinparamlocked DefaultFontName Helvetica

rectangle Smartphone {
  database db_smartphone [
    <b>Storage</b>
    - - -
    <i>persistente</i>
    <i>non criptato</i>
    ===

    messaggi
    transazioni
    id_operazione
    id_pagamento
  ]

  database db_smartphone_enc [
    <b>Storage</b>
    <b>criptato</b>
    - - -
    <i>peristente</i>
    <i>criptato</i>
    ===

    session_token
    wallet_token
  ]

}

rectangle "API Gateway" {
  database db_apigw_clients [
    <b>API Clients</b>
    - - -
    <i>persistente</i>
    <i>non criptato</i>
    ===

    api_token
    auth_groups
    service_id
  ]
}

rectangle "App Backend" {
  database db_backend_session [
    <b>App Sessions</b>
    - - -
    <i>persistente</i>
    <i>criptato</i>
    <i>geo-replicato</i>
    ===

    codice_fiscale
    session_token
    wallet_token
    asserzione_spid
  ]
}

rectangle "Pagopa Proxy" {
  database db_pagopaproxy [
    <b>IdPagamenti</b>
    - - -
    <i>persistente</i>
    <i>criptato</i>
    <i>geo-replicato</i>
    ===

    id_operazione
    id_pagamento
  ]
}

rectangle "API CD" {

  database db_messaggi [
    <b>Messaggi</b>
    - - -
    <i>persistente</i>
    <i>criptato</i>
    <i>geo-replicato</i>
    ===

    codice_fiscale
    contenuto
    id_unico_versamento?
    id_servizio
  ]

  database db_profili [
    <b>Profili</b>
    - - -
    <i>persistente</i>
    <i>criptato</i>
    <i>geo-replicato</i>
    ===

    codice_fiscale
    email
    lingue_preferite
    id_servizi_bloccati
  ]

  database db_servizi [
    <b>Servizi</b>
    - - -
    <i>persistente</i>
    <i>criptato</i>
    <i>geo-replicato</i>
    ===

    codice_fiscale
    nome
    pec
  ]

}

db_smartphone <- -> db_messaggi
db_smartphone <- -> db_servizi
db_smartphone <-u-> db_pagopaproxy

db_smartphone_enc <- -> db_backend_session

db_backend_session <- -> db_profili

db_apigw_clients <-u-> db_servizi

@enduml

PlantUML version 1.2018.00(Thu Jan 04 20:42:56 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_66-b17
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>