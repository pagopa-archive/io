<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="620px" preserveAspectRatio="none" style="width:842px;height:620px;" version="1.1" viewBox="0 0 842 620" width="842px" zoomAndPan="magnify"><defs/><g><!--cluster Ente Erogatore--><rect fill="#FFFFFF" height="67" style="stroke: #000000; stroke-width: 1.5;" width="118" x="270" y="16"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="278" y="28.7803">Ente Erogatore</text><!--cluster Cittadinanza Digitale\n\n--><rect fill="#FFFFFF" height="338" style="stroke: #000000; stroke-width: 1.5;" width="630" x="14" y="128"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="258" y="140.7803">Cittadinanza Digitale</text><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="331" y="154.7803"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="331" y="168.7803"/><!--cluster Servizio notifiche push--><path d="M655,275 C655,272 657,270 660,270 C663,270 665,272 665,275 C665,272 667,270 670,270 C673,270 675,272 675,275 C675,272 677,270 680,270 C683,270 685,272 685,275 C685,272 687,270 690,270 C693,270 695,272 695,275 C695,272 697,270 700,270 C703,270 705,272 705,275 C705,272 707,270 710,270 C713,270 715,272 715,275 C715,272 717,270 720,270 C723,270 725,272 725,275 C725,272 727,270 730,270 C733,270 735,272 735,275 C735,272 737,270 740,270 C743,270 745,272 745,275 C745,272 747,270 750,270 C753,270 755,272 755,275 C755,272 757,270 760,270 C763,270 765,272 765,275 C765,272 767,270 770,270 C773,270 775,272 775,275 C775,272 777,270 780,270 C783,270 785,272 785,275 C785,272 787,270 790,270 C793,270 795,272 795,275 C795,272 797,270 800,270 C803,270 805,272 805,275 C805,272 807,270 810,270 C813,270 815,272 815,275 C815,272 817,270 820,270 C823,270 825,272 825,275 C828,275 830,277 830,280 C830,283 828,285 825,285 C828,285 830,287 830,290 C830,293 828,295 825,295 C828,295 830,297 830,300 C830,303 828,305 825,305 C828,305 830,307 830,310 C830,313 828,315 825,315 C828,315 830,317 830,320 C830,323 828,325 825,325 C825,328 822,330 820,330 C817,330 815,328 815,325 C815,328 812,330 810,330 C807,330 805,328 805,325 C805,328 802,330 800,330 C797,330 795,328 795,325 C795,328 792,330 790,330 C787,330 785,328 785,325 C785,328 782,330 780,330 C777,330 775,328 775,325 C775,328 772,330 770,330 C767,330 765,328 765,325 C765,328 762,330 760,330 C757,330 755,328 755,325 C755,328 752,330 750,330 C747,330 745,328 745,325 C745,328 742,330 740,330 C737,330 735,328 735,325 C735,328 732,330 730,330 C727,330 725,328 725,325 C725,328 722,330 720,330 C717,330 715,328 715,325 C715,328 712,330 710,330 C707,330 705,328 705,325 C705,328 702,330 700,330 C697,330 695,328 695,325 C695,328 692,330 690,330 C687,330 685,328 685,325 C685,328 682,330 680,330 C677,330 675,328 675,325 C675,328 672,330 670,330 C667,330 665,328 665,325 C665,328 662,330 660,330 C657,330 655,328 655,325 C652,325 650,323 650,320 C650,317 652,315 655,315 C652,315 650,313 650,310 C650,307 652,305 655,305 C652,305 650,303 650,300 C650,297 652,295 655,295 C652,295 650,293 650,290 C650,287 652,285 655,285 C652,285 650,283 650,280 C650,277 652,275 655,275 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="660" y="291.7803">Servizio notifiche push</text><!--entity ente--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="294" y="41"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="304" y="61.7803">Servizio</text><!--entity apimessaggi--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="275.5" y="181"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="285.5" y="201.7803">API Messaggi</text><!--entity dbmessaggi--><path d="M288.5,425 C288.5,415 329,415 329,415 C329,415 369.5,415 369.5,425 L369.5,448 C369.5,458 329,458 329,458 C329,458 288.5,458 288.5,448 L288.5,425 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M288.5,425 C288.5,435 329,435 329,435 C329,435 369.5,435 369.5,425 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="298.5" y="449.7803">Messaggi</text><!--entity apipreferenze--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="22" y="181"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="32" y="201.7803">API Preferenze</text><!--entity dbpreferenze--><path d="M35,425 C35,415 80,415 80,415 C80,415 125,415 125,425 L125,448 C125,458 80,458 80,458 C80,458 35,458 35,448 L35,425 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M35,425 C35,435 80,435 80,435 C80,435 125,435 125,425 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="45" y="449.7803">Preferenze</text><!--entity backend--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="530" y="181"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="540" y="201.7803">Backend APP</text><!--entity apinotifiche--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="660" y="293"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="670" y="313.7803">API notifiche push</text><!--entity cittadino--><ellipse cx="707" cy="543" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M707,551 L707,578 M694,559 L720,559 M707,578 L694,593 M707,578 L720,593 " fill="#FEFECE" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="679" y="606.7803">Cittadino</text><!--entity app--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="671.5" y="419.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="681.5" y="440.2803">APP CD</text><!--link ente to apimessaggi--><path d="M329,75.1667 C329,100.3572 329,147.3713 329,175.3607 " fill="none" id="ente-apimessaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="329,180.6928,333,171.6928,329,175.6928,325,171.6928,329,180.6928" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="330" y="116.0103">(1) CF, messaggio</text><!--link apipreferenze to dbpreferenze--><path d="M80,220.1577 C80,265.7519 80,369.5771 80,414.7885 " fill="none" id="apipreferenze-dbpreferenze" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="80,215.1523,76,224.1523,80,220.1523,84,224.1523,80,215.1523" style="stroke: #A80036; stroke-width: 1.0;"/><!--link apipreferenze to apimessaggi--><path d="M138.0652,198 C177.6742,198 229.9705,198 269.8156,198 " fill="none" id="apipreferenze-apimessaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="275.1049,198,266.1049,194,270.1049,198,266.1049,202,275.1049,198" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="179.75" y="165.0103">(2) email,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="156.25" y="178.0103">casella messaggi</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="166.25" y="191.0103">notifiche push</text><!--link apimessaggi to dbmessaggi--><path d="M329,215.1523 C329,256.1676 329,360.1718 329,409.6076 " fill="none" id="apimessaggi-dbmessaggi" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="329,414.7885,333,405.7885,329,409.7885,325,405.7885,329,414.7885" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="330" y="307.0103">(3) messaggio,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="349.5" y="320.0103">mittente</text><!--link apimessaggi to backend--><path d="M382.5565,198 C424.2356,198 481.9939,198 524.8076,198 " fill="none" id="apimessaggi-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="529.9526,198,520.9526,194,524.9526,198,520.9526,202,529.9526,198" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="400.75" y="178.0103">(4) CF, messaggio,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="432.75" y="191.0103">mittente</text><!--link apimessaggi to backend--><path d="M366.3255,215.1299 C380.4072,220.7232 396.7681,226.211 412.25,229 C450.7415,235.934 461.7653,235.972 500.25,229 C513.9634,226.5156 528.3644,221.8908 541.2382,216.9575 " fill="none" id="apimessaggi-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="545.908,215.1294,536.0692,214.6855,541.2521,216.9521,538.9855,222.135,545.908,215.1294" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="413.25" y="212.0103">(7) messaggio,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="432.75" y="225.0103">mittente</text><!--link backend to apinotifiche--><path d="M604.8705,215.0104 C630.5616,234.9923 673.1575,268.1225 700.6465,289.5028 " fill="none" id="backend-apinotifiche" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="704.9237,292.8295,700.2752,284.1467,700.9769,289.7598,695.3637,290.4615,704.9237,292.8295" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="660" y="256.0103">(5) SHA256(CF)</text><!--link apinotifiche to app--><path d="M724.3027,327.0604 C720.7391,349.6005 714.4548,389.3483 710.5205,414.233 " fill="none" id="apinotifiche-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="709.7184,419.3059,715.0748,411.041,710.4992,414.3672,707.173,409.7916,709.7184,419.3059" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="720" y="368.0103">(6) ci sono nuovi</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="740" y="381.0103">messaggi</text><!--link backend to app--><path d="M584.9882,215.3577 C588.6241,242.294 597.9942,295.1994 619,335 C635.635,366.5189 663.7663,396.5753 683.7418,415.6845 " fill="none" id="backend-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="687.6223,419.3575,683.8357,410.2656,683.991,415.9204,678.3363,416.0757,687.6223,419.3575" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="620" y="313.5103">(7)</text><!--link app to cittadino--><path d="M707,453.5978 C707,472.0785 707,502.2701 707,527.4741 " fill="none" id="app-cittadino" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="707,532.7706,711,523.7706,707,527.7706,703,523.7706,707,532.7706" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="708" y="499.0103">(8)</text><!--
@startuml
skinparamlocked shadowing false
skinparamlocked DefaultFontName Helvetica

:Cittadino: as cittadino

agent "APP CD" as app

rectangle "Ente Erogatore" {
  agent "Servizio" as ente
}

rectangle "Cittadinanza Digitale\n\n" {
  agent "API Messaggi" as apimessaggi
  database "Messaggi" as dbmessaggi
  agent "API Preferenze" as apipreferenze
  database "Preferenze" as dbpreferenze
  agent "Backend APP" as backend
}

cloud "Servizio notifiche push" {
  agent "API notifiche push" as apinotifiche
}

ente -down-> apimessaggi : (1) CF, messaggio

dbpreferenze -u-> apipreferenze
apipreferenze -> apimessaggi : (2) email,\ncasella messaggi\nnotifiche push

apimessaggi -d-> dbmessaggi : (3) messaggio,\nmittente

apimessaggi -> backend : (4) CF, messaggio,\nmittente

backend -d-> apinotifiche : "(5) SHA256(CF)"

apinotifiche -d-> app : "(6) ci sono nuovi\nmessaggi"

backend -> app : "(7)  "

apimessaggi -> backend : "(7) messaggio,\nmittente"

app -d-> cittadino : "(8)"

@enduml

PlantUML version 1.2018.00(Thu Jan 04 20:42:56 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_66-b17
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>