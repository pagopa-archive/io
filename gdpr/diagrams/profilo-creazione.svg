<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="432px" preserveAspectRatio="none" style="width:842px;height:432px;" version="1.1" viewBox="0 0 842 432" width="842px" zoomAndPan="magnify"><defs/><g><!--cluster Cittadinanza Digitale--><rect fill="#FFFFFF" height="294.5" style="stroke: #000000; stroke-width: 1.5;" width="257" x="387" y="126.5"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="444.5" y="139.2803">Cittadinanza Digitale</text><!--cluster Servizio notifiche push--><path d="M655,133.5 C655,130.5 657,128.5 660,128.5 C663,128.5 665,130.5 665,133.5 C665,130.5 667,128.5 670,128.5 C673,128.5 675,130.5 675,133.5 C675,130.5 677,128.5 680,128.5 C683,128.5 685,130.5 685,133.5 C685,130.5 687,128.5 690,128.5 C693,128.5 695,130.5 695,133.5 C695,130.5 697,128.5 700,128.5 C703,128.5 705,130.5 705,133.5 C705,130.5 707,128.5 710,128.5 C713,128.5 715,130.5 715,133.5 C715,130.5 717,128.5 720,128.5 C723,128.5 725,130.5 725,133.5 C725,130.5 727,128.5 730,128.5 C733,128.5 735,130.5 735,133.5 C735,130.5 737,128.5 740,128.5 C743,128.5 745,130.5 745,133.5 C745,130.5 747,128.5 750,128.5 C753,128.5 755,130.5 755,133.5 C755,130.5 757,128.5 760,128.5 C763,128.5 765,130.5 765,133.5 C765,130.5 767,128.5 770,128.5 C773,128.5 775,130.5 775,133.5 C775,130.5 777,128.5 780,128.5 C783,128.5 785,130.5 785,133.5 C785,130.5 787,128.5 790,128.5 C793,128.5 795,130.5 795,133.5 C795,130.5 797,128.5 800,128.5 C803,128.5 805,130.5 805,133.5 C805,130.5 807,128.5 810,128.5 C813,128.5 815,130.5 815,133.5 C815,130.5 817,128.5 820,128.5 C823,128.5 825,130.5 825,133.5 C828,133.5 830,135.5 830,138.5 C830,141.5 828,143.5 825,143.5 C828,143.5 830,145.5 830,148.5 C830,151.5 828,153.5 825,153.5 C828,153.5 830,155.5 830,158.5 C830,161.5 828,163.5 825,163.5 C828,163.5 830,165.5 830,168.5 C830,171.5 828,173.5 825,173.5 C828,173.5 830,175.5 830,178.5 C830,181.5 828,183.5 825,183.5 C825,186.5 822,188.5 820,188.5 C817,188.5 815,186.5 815,183.5 C815,186.5 812,188.5 810,188.5 C807,188.5 805,186.5 805,183.5 C805,186.5 802,188.5 800,188.5 C797,188.5 795,186.5 795,183.5 C795,186.5 792,188.5 790,188.5 C787,188.5 785,186.5 785,183.5 C785,186.5 782,188.5 780,188.5 C777,188.5 775,186.5 775,183.5 C775,186.5 772,188.5 770,188.5 C767,188.5 765,186.5 765,183.5 C765,186.5 762,188.5 760,188.5 C757,188.5 755,186.5 755,183.5 C755,186.5 752,188.5 750,188.5 C747,188.5 745,186.5 745,183.5 C745,186.5 742,188.5 740,188.5 C737,188.5 735,186.5 735,183.5 C735,186.5 732,188.5 730,188.5 C727,188.5 725,186.5 725,183.5 C725,186.5 722,188.5 720,188.5 C717,188.5 715,186.5 715,183.5 C715,186.5 712,188.5 710,188.5 C707,188.5 705,186.5 705,183.5 C705,186.5 702,188.5 700,188.5 C697,188.5 695,186.5 695,183.5 C695,186.5 692,188.5 690,188.5 C687,188.5 685,186.5 685,183.5 C685,186.5 682,188.5 680,188.5 C677,188.5 675,186.5 675,183.5 C675,186.5 672,188.5 670,188.5 C667,188.5 665,186.5 665,183.5 C665,186.5 662,188.5 660,188.5 C657,188.5 655,186.5 655,183.5 C652,183.5 650,181.5 650,178.5 C650,175.5 652,173.5 655,173.5 C652,173.5 650,171.5 650,168.5 C650,165.5 652,163.5 655,163.5 C652,163.5 650,161.5 650,158.5 C650,155.5 652,153.5 655,153.5 C652,153.5 650,151.5 650,148.5 C650,145.5 652,143.5 655,143.5 C652,143.5 650,141.5 650,138.5 C650,135.5 652,133.5 655,133.5 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="660" y="150.2803">Servizio notifiche push</text><!--entity backend--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="416.5" y="151.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="426.5" y="172.2803">Backend CD</text><!--entity apipreferenze--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="395" y="374.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="405" y="395.2803">API Preferenze</text><!--entity dbpreferenze--><path d="M546,380 C546,370 591,370 591,370 C591,370 636,370 636,380 L636,403 C636,413 591,413 591,413 C591,413 546,413 546,403 L546,380 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M546,380 C546,390 591,390 591,390 C591,390 636,390 636,380 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="556" y="404.7803">Preferenze</text><!--entity apinotifiche--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="660" y="151.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="670" y="172.2803">API notifiche push</text><!--entity cittadino--><ellipse cx="34" cy="140" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M34,148 L34,175 M21,156 L47,156 M34,175 L21,190 M34,175 L47,190 " fill="#FEFECE" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="6" y="203.7803">Cittadino</text><!--entity idp--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="198.5" y="8"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="208.5" y="28.7803">IdP SPID</text><!--entity app--><rect fill="#FEFECE" height="34" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="202.5" y="151.5"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="212.5" y="172.2803">App CD</text><!--link cittadino to app--><path d="M62.2263,168.5 C97.2583,168.5 157.2258,168.5 196.9889,168.5 " fill="none" id="cittadino-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="202.2185,168.5,193.2185,164.5,197.2185,168.5,193.2185,172.5,202.2185,168.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="80.25" y="161.5103">(1) primo accesso</text><!--link idp to app--><path d="M237,47.1431 C237,75.9087 237,125.5111 237,151.4973 " fill="none" id="idp-app" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="237,42.0248,233,51.0248,237,47.0248,241,51.0248,237,42.0248" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="238" y="89.5103">(2) auth SPID</text><!--link idp to cittadino--><path d="M208.8123,44.9258 C170.1344,72.2671 101.0084,121.132 62.2813,148.508 " fill="none" id="idp-cittadino" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="212.9161,42.0248,203.258,43.9536,208.8332,44.911,207.8758,50.4862,212.9161,42.0248" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="167.5" y="83.0103">(2) email,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="167" y="96.0103">password</text><!--link idp to backend--><path d="M271.7571,42.1529 C288.4215,50.6794 308.5143,61.407 326,72 C366.2632,96.392 410.6895,127.8406 438.4687,148.0894 " fill="none" id="idp-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="442.781,151.2403,437.874,142.7009,438.7439,148.2905,433.1543,149.1603,442.781,151.2403" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="370" y="89.5103">(3) CF, nome, cognome, email</text><!--link backend to apipreferenze--><path d="M465.0015,185.6282 C462.6762,225.5161 456.9005,324.5914 454.3025,369.1566 " fill="none" id="backend-apipreferenze" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="454.0019,374.3135,458.5189,365.5616,454.2929,369.322,450.5325,365.096,454.0019,374.3135" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="484.5" y="279.0103">(4) CF, email,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="461" y="292.0103">casella messaggi=SI,</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="473" y="305.0103">notifiche push=SI</text><!--link apipreferenze to dbpreferenze--><path d="M511.2188,391.5 C521.038,391.5 530.8573,391.5 540.6766,391.5 " fill="none" id="apipreferenze-dbpreferenze" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="545.8114,391.5,536.8114,387.5,540.8114,391.5,536.8114,395.5,545.8114,391.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link app to backend--><path d="M271.7802,168.5 C308.8121,168.5 367.9305,168.5 411.2261,168.5 " fill="none" id="app-backend" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="416.425,168.5,407.425,164.5,411.425,168.5,407.425,172.5,416.425,168.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="290" y="161.5103">(5) ID installazione</text><!--link backend to apinotifiche--><path d="M515.7064,168.5 C555.013,168.5 610.4418,168.5 654.6661,168.5 " fill="none" id="backend-apinotifiche" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="659.7277,168.5,650.7277,164.5,654.7277,168.5,650.7277,172.5,659.7277,168.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="539.75" y="182.5103">(5) SHA256(CF),</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="543.25" y="195.5103">ID installazione</text><!--
@startuml
skinparamlocked shadowing false
skinparamlocked DefaultFontName Helvetica

:Cittadino: as cittadino

agent "IdP SPID" as idp

agent "App CD" as app

rectangle "Cittadinanza Digitale" {
  agent "Backend CD" as backend

  agent "API Preferenze" as apipreferenze

  database "Preferenze" as dbpreferenze
}

cloud "Servizio notifiche push" {
  agent "API notifiche push" as apinotifiche
}

cittadino -> app : (1) primo accesso

app .u.> idp : (2) auth SPID

cittadino -u-> idp : (2) email,\npassword

idp -> backend : (3) CF, nome, cognome, email

backend -d-> apipreferenze : (4) CF, email,\ncasella messaggi=SI,\nnotifiche push=SI

apipreferenze -r-> dbpreferenze

app -> backend : (5) ID installazione

backend -r-> apinotifiche : (5) SHA256(CF),\nID installazione

@enduml

PlantUML version 1.2018.00(Thu Jan 04 20:42:56 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_66-b17
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>